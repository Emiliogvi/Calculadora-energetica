{% extends 'base.html' %}
{% block content %}
<div class="container mt-5 text-light" style="max-width: 1100px;">

  <h2 class="text-center mb-4">Calcular Consumos y Costos</h2>

  <!-- üîπ Formulario -->
  <form method="POST" class="d-flex align-items-center justify-content-center gap-2 mb-4">
    {% csrf_token %}
    <label class="fw-bold">Tarifa de Energ√≠a ($/kWh):</label>
    <input type="number" step="0.01" name="tarifa" value="{{ tarifa }}" class="form-control w-auto d-inline-block text-center">
    <button type="submit" class="btn btn-success px-4">Calcular</button>
  </form>

  <!-- üîπ Tabla de resultados -->
  {% if resultados %}
  <div class="card bg-dark text-light shadow-lg rounded-4 p-4">
    <div class="table-responsive">
      <table class="table table-dark table-hover align-middle text-center mb-0">
        <thead class="table-success text-dark">
          <tr>
            <th>Electrodom√©stico</th>
            <th>Consumo Mensual (kWh)</th>
            <th>Consumo Anual (kWh)</th>
            <th>Costo Mensual ($)</th>
            <th>Costo Anual ($)</th>
            <th>Huella CO‚ÇÇ Mensual (kg)</th>
            <th>Huella CO‚ÇÇ Anual (kg)</th>
          </tr>
        </thead>
        <tbody>
          {% for r in resultados %}
          <tr>
            <td class="fw-bold">{{ r.nombre }}</td>
            <td>{{ r.consumo_mensual }}</td>
            <td>{{ r.consumo_anual }}</td>
            <td>${{ r.costo_mensual|floatformat:1 }}</td>
            <td>${{ r.costo_anual|floatformat:1 }}</td>
            <td>{{ r.huella_mensual|floatformat:2 }}</td>
            <td>{{ r.huella_anual|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- üîπ Bot√≥n inferior -->
  <div class="text-center mt-4">
    <a href="{% url 'dashboard' %}" class="btn btn-success btn-lg px-4">
      ‚Üê Volver al inicio
    </a>
  </div>

  {% else %}
  <p class="text-center mt-4">No hay electrodom√©sticos registrados.</p>
  {% endif %}

</div>
{% endblock %}
